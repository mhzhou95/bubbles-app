(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{38:function(e,t,a){e.exports=a(68)},67:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(33),c=a.n(l),s=a(13),u=a(5),o=a(12),i=Object(n.createContext)(),m=function(){var e=Object(n.useContext)(i),t=e.isAuthenticated,a=e.logout,l=e.user,c=r.a.createElement(n.Fragment,null,r.a.createElement("nav",{className:"nav-bar"},r.a.createElement("ul",null,r.a.createElement("h2",null,"Hello ",l&&l.username),r.a.createElement("li",null,r.a.createElement(o.a,{className:"link",to:"/"},"Home")),r.a.createElement("li",null,r.a.createElement(o.a,{className:"link",to:"/create"},"Create Bubble")),r.a.createElement("li",null,r.a.createElement("a",{className:"link",onClick:function(){a()},href:"#!"},r.a.createElement("i",{className:"fas fa-sign-out-alt"})," Logout"))))),s=r.a.createElement(n.Fragment,null,r.a.createElement("nav",{className:"nav-bar"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(o.a,{className:"link",to:"/"},"Home")),r.a.createElement("li",null,r.a.createElement(o.a,{className:"link",to:"/register"},"Register")),r.a.createElement("li",null,r.a.createElement(o.a,{className:"link",to:"/login"},"Login")))));return r.a.createElement("nav",null,r.a.createElement("ul",null,t?c:s))},p=Object(n.createContext)(),b=a(1),d=a.n(b),E=a(7),f=a(4),v=function(e){var t=Object(n.useContext)(p),a=Object(n.useContext)(i),l=e.bubble,c=a.user,s=a.isAuthenticated,u=t.updateBubble,m=Object(n.useState)({_id:l._id,message:l.message,upvotes:l.upvotes}),b=Object(f.a)(m,2),v=b[0],h=b[1],g=Object(n.useState)(!1),O=Object(f.a)(g,2),y=O[0],j=O[1],x="/bubble/".concat(l._id),R=function(){var e=Object(E.a)(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h({_id:l._id,message:l.message,upvotes:v.upvotes+=1}),e.next=3,u(v);case 3:return e.next=5,t;case 5:j(!0);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"bubble-item-container"},r.a.createElement("h2",null,l.username),r.a.createElement("p",{className:"bubble-item-message"},l.message),r.a.createElement("p",{className:"bubble-item-upvotes"},"upvotes: ",l.upvotes," ",r.a.createElement("button",{disabled:y,onClick:R},r.a.createElement("i",{className:"fas fa-arrow-alt-circle-up"}))),s&&c._id===l.user&&r.a.createElement(n.Fragment,null,r.a.createElement("button",{onClick:function(){t.deleteBubble(l._id)}},"Delete"),"  ",r.a.createElement("button",null,r.a.createElement(o.a,{className:"bubble-item-link",to:x},"Edit"))))},h=function(){var e=Object(n.useRef)(""),t=Object(n.useContext)(p);return r.a.createElement("div",{className:"search-bar"},r.a.createElement("form",null,r.a.createElement("input",{className:"search-bar-input",ref:e,type:"text",placeholder:"search bubbles",onChange:function(a){""!==e.current.value?(t.filterBubbles(a.target.value),console.log(a.target.value)):t.clearFilter()}})))},g=function(){var e=Object(n.useContext)(p),t=e.bubbles,a=e.filtered,l=e.loading,c=e.fetchBubbles;return Object(n.useEffect)(function(){c()},[]),null===t?r.a.createElement("h4",null,"No Bubbles Were Ever made "):r.a.createElement("div",{className:"whole-container"},l?r.a.createElement("p",null,"Loading..."):r.a.createElement(n.Fragment,null,r.a.createElement(h,null),r.a.createElement("div",{className:"bubble-list-container"},null!==a?a.map(function(e){return r.a.createElement(v,{key:e._id,bubble:e})}):t.map(function(e){return r.a.createElement(v,{key:e._id,bubble:e})}))))},O=function(){var e=Object(n.useContext)(i);return Object(n.useEffect)(function(){e.loadUser()},[]),r.a.createElement("div",null,r.a.createElement(g,null))},y=a(11),j=a(2),x=Object(n.createContext)(),R=function(e){var t=Object(n.useContext)(x),a=Object(n.useContext)(i),l=t.setAlert,c=a.login,s=a.error,u=a.clearErrors,o=a.isAuthenticated;Object(n.useEffect)(function(){o&&(window.location.href="/"),null!==s&&(t.alerts.length<1&&l(s),u())},[s,o,e.history]);var m=Object(n.useState)({email:"",password:""}),p=Object(f.a)(m,2),b=p[0],d=p[1],E=b.email,v=b.password,h=function(e){d(Object(j.a)({},b,Object(y.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",{className:"login-form"},r.a.createElement("h1",null,"Login to Your Account"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),c({email:E,password:v})}},r.a.createElement("div",{className:"form-items"},r.a.createElement("label",{htmlFor:"email"},"Email: "),r.a.createElement("input",{type:"text",placeholder:"used to sign in",name:"email",value:E,required:!0,onChange:h})),r.a.createElement("div",{className:"form-items"},r.a.createElement("label",{htmlFor:"password"},"Password: "),r.a.createElement("input",{type:"password",placeholder:"password",name:"password",value:v,required:!0,onChange:h})),r.a.createElement("input",{className:"form-submit-button",type:"submit",value:"Login"})))},w=function(e){var t=Object(n.useContext)(x),a=Object(n.useContext)(i),l=t.setAlert,c=a.register,s=a.error,u=a.clearErrors,o=a.isAuthenticated;Object(n.useEffect)(function(){o&&(window.location.href="/"),"User already exists"===s&&(t.alerts.length<2&&l(s),u())},[s,o,e.history]);var m=Object(n.useState)({email:"",username:"",password:"",password2:""}),p=Object(f.a)(m,2),b=p[0],d=p[1],E=b.email,v=b.username,h=b.password,g=b.password2,O=function(e){d(Object(j.a)({},b,Object(y.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",{className:"register-form"},r.a.createElement("h1",null,"Make a Account"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),h!==g?t.alerts.length<2&&l("Passwords do not match"):(c({email:E,username:v,password:h}),u())}},r.a.createElement("div",{className:"form-items"},r.a.createElement("label",{htmlFor:"email"},"Email: "),r.a.createElement("input",{type:"email",placeholder:"used to sign in",name:"email",value:b.email,required:!0,onChange:O})),r.a.createElement("div",{className:"form-items"},r.a.createElement("label",{htmlFor:"username"},"Username: "),r.a.createElement("input",{type:"text",placeholder:"display name",name:"username",value:b.username,required:!0,minLength:3,maxLength:12,onChange:O})),r.a.createElement("div",{className:"form-items"},r.a.createElement("label",{htmlFor:"password"},"Password: "),r.a.createElement("input",{type:"password",placeholder:"password",name:"password",value:b.password,required:!0,minLength:6,maxLength:12,onChange:O})),r.a.createElement("div",{className:"form-items"},r.a.createElement("label",{htmlFor:"password2"},"Confirm Password: "),r.a.createElement("input",{type:"password",placeholder:"confirm password",name:"password2",value:b.password2,required:!0,minLength:6,onChange:O})),r.a.createElement("input",{className:"form-submit-button",type:"submit",maxLength:12,value:"Register"})))},B=function(e){var t=Object(n.useContext)(p),a=Object(n.useState)({message:""}),l=Object(f.a)(a,2),c=l[0],s=l[1],u=c.message;return r.a.createElement("div",{className:"bubble-form"},r.a.createElement("form",{onSubmit:function(a){a.preventDefault(),t.addBubble(c),s({message:""}),e.onSubmit()}},r.a.createElement("h3",{className:"form-items"},"Create Bubble"),r.a.createElement("input",{className:"form-items",type:"text",placeholder:"text",name:"message",value:u,onChange:function(e){s(Object(j.a)({},c,Object(y.a)({},e.target.name,e.target.value)))}}),r.a.createElement("input",{className:"form-submit-button",type:"submit",value:"create"})))},C=function(e){return r.a.createElement(B,{onSubmit:function(){e.history.push("/")}})},L=function(e){var t=Object(n.useContext)(p),a=window.location.pathname.substring(8),l=t.bubbles.filter(function(e){return e._id.toString()===a}),c=Object(n.useState)({_id:l[0]._id,message:l[0].message,upvotes:l[0].upvotes}),s=Object(f.a)(c,2),u=s[0],o=s[1],i=u.message,m=function(){var a=Object(E.a)(d.a.mark(function a(n){return d.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),a.next=3,t.updateBubble(u);case 3:e.history.push("/");case 4:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}();return r.a.createElement("div",{className:"edit-form"},r.a.createElement("form",{onSubmit:m},r.a.createElement("h3",{className:"form-items"},"Edit Bubble"),r.a.createElement("input",{className:"form-items",type:"text",placeholder:"text",name:"message",value:i,onChange:function(e){o(Object(j.a)({},u,Object(y.a)({},e.target.name,e.target.value)))}}),r.a.createElement("input",{className:"form-submit-button",type:"submit",value:"edit"})))},_=function(){var e=Object(n.useContext)(x);return null!==e.alerts&&e.alerts.map(function(e){return r.a.createElement("div",{key:e.id},r.a.createElement("i",{className:" fas fa-info-circle"},e.msg))})},S=a(37),k=function(e){var t=e.component,a=Object(S.a)(e,["component"]),l=Object(n.useContext)(i).isAuthenticated;return r.a.createElement(s.b,Object.assign({},a,{render:function(e){return l?r.a.createElement(t,e):r.a.createElement(s.a,{to:"/"})}}))},N=function(){return r.a.createElement("div",null,r.a.createElement("h3",null,"Error 404 Page Not Found"))},A=a(9),T=a.n(A),U=function(e,t){switch(t.type){case"USER_LOADED":return Object(j.a)({},e,{isAuthenticated:!0,user:t.payload,loading:!1});case"REGISTER_SUCCESS":case"LOGIN_SUCCESS":return localStorage.setItem("token",t.payload.token),Object(j.a)({},e,t.payload,{isAuthenticated:!0,loading:!1});case"LOGIN_FAIL":case"REGISTER_FAIL":case"AUTH_ERROR":case"LOGOUT":return localStorage.removeItem("token"),Object(j.a)({},e,{token:null,isAuthenticated:!1,loading:!1,user:null,error:t.payload});case"CLEAR_ERRORS":return Object(j.a)({},e,{error:null});default:return e}},F=function(e){e?T.a.defaults.headers.common["x-auth-token"]=e:delete T.a.defaults.headers.common["x-auth-token"]},I=function(e){var t={token:localStorage.getItem("token"),isAuthenticated:null,user:null,loading:!0,error:null},a=Object(n.useReducer)(U,t),l=Object(f.a)(a,2),c=l[0],s=l[1],u=function(){var e=Object(E.a)(d.a.mark(function e(){var t;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.token&&F(localStorage.token),e.prev=1,e.next=4,T.a.get("/api/auth");case 4:t=e.sent,s({type:"USER_LOADED",payload:t.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),s({type:"AUTH_ERROR"});case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(){return e.apply(this,arguments)}}(),o=function(){var e=Object(E.a)(d.a.mark(function e(t){var a,n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,T.a.post("/api/users",t,a);case 4:n=e.sent,s({type:"REGISTER_SUCCESS",payload:n.data}),u(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),s({type:"REGISTER_FAIL",payload:e.t0.response.data.msg});case 12:case"end":return e.stop()}},e,null,[[1,9]])}));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(E.a)(d.a.mark(function e(t){var a,n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,T.a.post("/api/auth",t,a);case 4:n=e.sent,s({type:"LOGIN_SUCCESS",payload:n.data}),u(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),s({type:"LOGIN_FAIL",payload:e.t0.response.data.msg});case 12:case"end":return e.stop()}},e,null,[[1,9]])}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(i.Provider,{value:{token:c.token,isAuthenticated:c.isAuthenticated,user:c.user,loading:c.loading,error:c.error,register:o,loadUser:u,clearErrors:function(){s({type:"CLEAR_ERRORS"})},login:m,logout:function(){s({type:"LOGOUT"})}}},e.children)},D=a(16),G=function(e,t){switch(t.type){case"FETCH_BUBBLES":return Object(j.a)({},e,{bubbles:t.payload,loading:!1});case"ADD_BUBBLE":return Object(j.a)({},e,{bubbles:[t.payload].concat(Object(D.a)(e.bubbles)),loading:!1});case"DELETE_BUBBLE":return Object(j.a)({},e,{bubbles:e.bubbles.filter(function(e){return e._id!==t.payload}),loading:!1});case"UPDATE_BUBBLE":return Object(j.a)({},e,{bubbles:e.bubbles.map(function(e){return e._id===t.payload._id?t.payload:e}),loading:!1});case"FILTER_BUBBLES":return Object(j.a)({},e,{filtered:e.bubbles.filter(function(e){var a=new RegExp("".concat(t.payload),"gi");return e.message.match(a)})});case"CLEAR_FILTER":return Object(j.a)({},e,{filtered:null});case"BUBBLE_ERROR":case"FETCH_ERROR":return Object(j.a)({},e,{error:t.payload});default:return e}},P=function(e){var t=Object(n.useReducer)(G,{bubbles:null,filtered:null,error:null,loading:!0}),a=Object(f.a)(t,2),l=a[0],c=a[1],s=function(){var e=Object(E.a)(d.a.mark(function e(){var t;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.a.get("/api/bubbles");case 3:t=e.sent,c({type:"FETCH_BUBBLES",payload:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),c({type:"FETCH_ERROR",payload:e.t0.response.msg});case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Object(E.a)(d.a.mark(function e(t){var a,n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,T.a.post("/api/bubbles",t,a);case 4:n=e.sent,c({type:"ADD_BUBBLE",payload:n.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),c({type:"BUBBLE_ERROR",payload:e.t0.response.msg});case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(E.a)(d.a.mark(function e(t){var a,n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,T.a.put("/api/bubbles/".concat(t._id),t,a);case 4:n=e.sent,c({type:"UPDATE_BUBBLE",payload:n.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),c({type:"BUBBLE_ERROR",payload:e.t0.response.msg});case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(E.a)(d.a.mark(function e(t){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.a.delete("/api/bubbles/".concat(t));case 3:c({type:"DELETE_BUBBLE",payload:t}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),c({type:"BUBBLE_ERROR",payload:e.t0.response.msg});case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(p.Provider,{value:{bubbles:l.bubbles,filtered:l.filtered,error:l.error,loading:l.loading,addBubble:u,deleteBubble:i,updateBubble:o,filterBubbles:function(e){c({type:"FILTER_BUBBLES",payload:e})},clearFilter:function(){c({type:"CLEAR_FILTER"})},fetchBubbles:s}},e.children)},H=a(36),q=a.n(H),M=function(e,t){switch(t.type){case"SET_ALERT":return[].concat(Object(D.a)(e),[t.payload]);case"REMOVE_ALERT":return e.filter(function(e){return e.id!==t.payload});default:return e}},J=function(e){var t=Object(n.useReducer)(M,[]),a=Object(f.a)(t,2),l=a[0],c=a[1];return r.a.createElement(x.Provider,{value:{alerts:l,setAlert:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3,a=q.a.v4();c({type:"SET_ALERT",payload:{msg:e,id:a}}),setTimeout(function(){return c({type:"REMOVE_ALERT",payload:a})},t)},clearAlerts:function(){c({type:"CLEAR_ALERTS"})}}},e.children)};a(67);localStorage.token&&F(localStorage.token);var V=Object(u.a)(),W=function(){return r.a.createElement(I,null,r.a.createElement(P,null,r.a.createElement(J,null,r.a.createElement(s.c,{history:V},r.a.createElement(m,null),r.a.createElement(_,null),r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/",component:O}),r.a.createElement(s.b,{exact:!0,path:"/login",component:R}),r.a.createElement(s.b,{exact:!0,path:"/register",component:w}),r.a.createElement(k,{exact:!0,path:"/create",component:C}),r.a.createElement(k,{exact:!0,path:"/bubble/:id",component:L}),r.a.createElement(s.b,{path:"",component:N}))))))};c.a.render(r.a.createElement(W,null),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.1f5fd825.chunk.js.map